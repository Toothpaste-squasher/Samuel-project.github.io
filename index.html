<!DOCTYPE html>
<html>
  <head>
    <title>Rock Paer Scissors</title>
    <style>
      body {
        text-align: center;
        font-family: sans-serif;
        background-color: #f0f0f0;
      }
      button {
        background-color: transparent;
        border: solid 1px #000;
        height: 100px;
        width: 100px;
        border-radius: 50%;
        cursor: pointer;
        padding: 10px;
        vertical-align: top;
      }

      img {
        display: fit;
        height: 80px;
        width: 80px;
        border-radius: 50%;
      }
    </style>
  </head>
  <body>
    <p>Rock Paper Scissors</p>

    <button
      onclick="
      playerResult = 'rock';
      compResult = compResponse();
      winner = determineWinner(playerResult, compResult);
      revealResults(playerResult, compResult, winner);
      "
    >
      <img src="images/rock.png" alt="rock" />
    </button>

    <button
      onclick="
      playerResult = 'paper';
      compResult = compResponse();
      winner = determineWinner(playerResult, compResult);
      revealResults(playerResult, compResult, winner);
      "
    >
      <img src="images/paper.png" alt="paper" />
    </button>

    <button
      onclick="
      playerResult = 'scissors';
      compResult = compResponse();
      winner = determineWinner(playerResult, compResult);
      revealResults(playerResult, compResult, winner);
      "
    >
      <img src="images/scissors.png" alt="scissors" />
    </button>
    <p class="js-result"></p>
    <p class="js-score"></p>

    <button
      onclick="
      score.player = 0;
      score.computer = 0;
      localStorage.setItem('score', JSON.stringify(score));
      document.querySelector('.js-score').innerHTML = `Score: Player ${score.player}; Computer ${score.computer}`;

      "
    >
      Reset score
    </button>

    <script>
      const score = JSON.parse(
        localStorage.getItem("score") || '{"player": 0, "computer": 0}'
      );

      updateScoreElement();

      let compResult;
      let winner;
      let playerResult;

      function compResponse() {
        randomNumber = Math.random();
        if (randomNumber >= 0 && randomNumber < 1 / 3) {
          computer = "rock";
        } else if (randomNumber >= 1 / 3 && randomNumber < 2 / 3) {
          computer = "paper";
        } else {
          computer = "scissors";
        }
        return computer;
      }

      function determineWinner(player, computer) {
        if (computer === player) {
          winner = "";
        } else if (
          (computer === "rock" && player === "scissors") ||
          (computer === "paper" && player === "rock") ||
          (computer === "scissors" && player === "paper")
        ) {
          winner = "Computer";
        } else {
          winner = "Player";
        }

        localStorage.setItem("score", JSON.stringify(score));

        updateScoreElement();

        return winner;
      }

      function updateScoreElement() {
        document.querySelector(
          ".js-score"
        ).innerHTML = `Score: Player ${score.player}; Computer ${score.computer}`;
      }

      function revealResults(player, computer, winner) {
        if (winner !== "") {
          document.querySelector(
            ".js-result"
          ).innerHTML = `You played ${player} and computer played ${computer}, so ${winner} is the winner`;
        } else {
          document.querySelector(
            ".js-result"
          ).innerHTML = `You played ${player} and computer played ${computer}, so it's a draw...`;
        }

        if (winner === "Player") {
          score.player++;
        } else if (winner === "Computer") {
          score.computer++;
        }
      }
    </script>
  </body>
</html>
